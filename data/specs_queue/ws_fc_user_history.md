
we_mart.ws_fc_user_history
==========================

# BASIC INFO

|**About**| ë‹´ë‹¹ì ìˆ˜ê¸° ì…ë ¥ í•„ìš” |
| :--- | :--- |
|**Database**|**we_mart**|
|**Table Type**|MART PRIMARY|
|**Partitioned by**|`part_art_id`, `part_date`|
|**Created/ Last Updated At**|2021-11-29 / 2024-08-05|
|**Created By**|ë°•ìƒë¯¼|
|**Last Updated By**|ìœ¤ìƒí˜|
|**Collaborators**|ìœ¤ìƒí˜[34], ì´í˜„ì§€[2], êµ¬ë¯¼ì„œ[1], ë°•ìƒë¯¼[1]|
  
#### Change History
|**Date**|**By**|**LINK**|
| :--- | :--- | :--- |
|2021-11-29|ë°•ìƒë¯¼|[PR](https://github.com/benxcorp/databricks/commit/8dc809154614d40353684e2d2023adee4ec47cef)|
|2021-12-17|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/652ef83b3a4e225efa4353dc1ecd8c881eaa98be)|
|2021-12-20|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/8c41b3c8d53490819b3cd626f567417989cef051)|
|2022-03-04|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/5de19eaf314b5fd5c7f94b7dabe62bc68d110bf3)|
|2022-05-13|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/4aa494fff8b0891738bec4270fdb26f71074683e)|
|2022-06-21|ì´í˜„ì§€|[PR](https://github.com/benxcorp/databricks/commit/4de5d0a511e4aea4096e4e68957053d954f979fb)|
|2022-06-21|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/d07ae742b49b4163f76dd32a971771c22f2b2555)|
|2022-08-19|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/a82d03beb7252432a46d7164f1069bc88afe0018)|
|2022-08-19|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/b5af925a768f04810481d743f2e417b3b2afe734)|
|2022-08-23|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/8ccc94a120419b31b2d74857921df940eb1f5033)|
|2022-08-24|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/871a7138484ad41a348c303a24a8a87c9fc27b81)|
|2022-08-30|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/4bbe0e24e8be0f337ce24991b7622f05eabb9aa1)|
|2022-10-04|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/a31e0649bb87b99eecefaa1967b43a3e68825b15)|
|2022-10-05|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/a0bd7450977a7100cb954f70581fa55ff97b98b0)|
|2022-10-14|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/c0f3d80ab02475bd28d2f87c43604934279294e1)|
|2022-10-17|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/e3de70e5a7a5d3078bca59b58c8d51f2e56679ef)|
|2022-10-18|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/6bbc236af5492ff1fbf654fa2000e0854df17910)|
|2022-12-09|êµ¬ë¯¼ì„œ|[PR](https://github.com/benxcorp/databricks/commit/bd183779c84e616084e05627330a1c8b98ca44bd)|
|2023-05-24|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/28e1e902aef56aae5c4b0bac8d2b5283fa318f13)|
|2023-05-24|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/4d8435e56fe83ab5bb00ad700576e3578ff11f3d)|
|2023-06-16|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/f24519f1390062c7405b9863081301383464861e)|
|2023-09-13|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/900aba86a8832ff6bc1a7cacda3706b3a2c3e261)|
|2023-09-13|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/ad353a528ede2b2465d2cb67d7f97aacc8c7a3ae)|
|2023-09-14|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/eed6ab5484556a965f56c9be68eab48c82909c66)|
|2023-09-15|ì´í˜„ì§€|[PR](https://github.com/benxcorp/databricks/commit/0d97f79144b048f974560da403f0240da6925e88)|
|2023-09-15|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/6a86c922335a95557baf5c403622e4473e73f3b5)|
|2023-09-22|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/ece1022226d23f86f2c4a33662480e94555204c2)|
|2023-09-25|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/22797044f0117b386d6e0838969df94e52241472)|
|2023-09-25|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/3329d287b8c84766de81b8aea2a4eb5d15d87cd9)|
|2023-09-26|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/8070c9cbb22b4dcffbfed79a495870e4125a1391)|
|2023-09-27|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/6399000bd1a384e9a035498ee6031b03ebd1e776)|
|2024-01-22|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/80884d146e8b55218c8104f48e71facd5a42c3e0)|
|2024-03-20|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/3f08ce4d6aed1bca75a7df13a2bcce930c7e54eb)|
|2024-03-20|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/dfb78716b8902da2faf92569ee2899ce4dbd8290)|
|2024-03-28|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/ce170094ba8b6ecf0228994ae20046d4decd4e47)|
|2024-07-22|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/d983591076e2211d2592fc576f2893c13f8a7ffe)|
|2024-08-02|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/3b2e1a575e4c39ff2e903692fc2dbed58d0828fb)|
|2024-08-05|ìœ¤ìƒí˜|[PR](https://github.com/benxcorp/databricks/commit/8793afc5490510a264cccde00409a7a9de63f896)|
  
  
# TABLE NOTICE
  
### í…Œì´ë¸” ê°œìš”

* **í…Œì´ë¸” ëª©ì **: ìœ„ë²„ìŠ¤ ë©¤ë²„ì‹­ ê°€ì… ì •ë³´ ë° êµ¬ë§¤ ì •ë³´, ìœ ì € ì •ë³´, ë©¤ë²„ì‹­ ìƒí’ˆ ì •ë³´ë¥¼ í†µí•©í•œ íˆìŠ¤í† ë¦¬ í…Œì´ë¸”
* **ë°ì´í„° ë ˆë²¨**: TRANSACTIONAL DATA
* **íŒŒí‹°ì…˜ í‚¤**: `part_art_id`, `part_date`
* **ì£¼ìš” í‚¤**: `fc_num`

### í…Œì´ë¸” íŠ¹ì§•

* ê° ë©¤ë²„ì‹­ ê°€ì… ê±´ì— ëŒ€í•œ ìƒì„¸ ì •ë³´ë¥¼ ë‹´ê³  ìˆìœ¼ë©°, ë©¤ë²„ì‹­ ê°€ì…, ë§Œë£Œ, ê°±ì‹ , ë³µêµ¬, ì·¨ì†Œ ë“± ëª¨ë“  íˆìŠ¤í† ë¦¬ë¥¼ ê¸°ë¡
* ë©¤ë²„ì‹­ ì¢…ë¥˜, ê°€ì… ì‹œê°, ë§Œë£Œ ì‹œê°, êµ¬ë§¤ ì‹œê°, ìœ ì € ì •ë³´, ìƒí’ˆ ì •ë³´, ë©¤ë²„ì‹­ ìƒíƒœ, êµ¬ë§¤ ìƒíƒœ, íƒˆí‡´ ì‚¬ìœ  ë“± ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ì œê³µ
* ë©¤ë²„ì‹­ ë³µêµ¬ ì •ë³´ë¥¼ ë³„ë„ë¡œ ê¸°ë¡í•˜ì—¬ ë©¤ë²„ì‹­ ë³µêµ¬ ê±´ì— ëŒ€í•œ ë¶„ì„ ê°€ëŠ¥
* ë©¤ë²„ì‹­ êµ¬ë§¤ íšŸìˆ˜, ê°±ì‹ ìœ¼ë¡œ ì¸í•œ ì¶”ê°€ ì¼ìˆ˜ ë“± ë©¤ë²„ì‹­ êµ¬ë§¤ íŒ¨í„´ ë¶„ì„ ê°€ëŠ¥
* ìœ ì €ì˜ ìµœì´ˆ ê°€ì… ì‹œê°(ë©¤ë²„ì‹­ ì„œë¹„ìŠ¤ ì „ì²´ ê¸°ì¤€, ì•„í‹°ìŠ¤íŠ¸ ê¸°ì¤€, ìƒµ ê¸°ì¤€) ì •ë³´ ì œê³µ

### ë°ì´í„° ì¶”ì¶œ ë° ìƒì„± ê³¼ì •

1. **ì£¼ìš” ë°ì´í„° ì†ŒìŠ¤**:
    * `wev_prod.we_mart.ods_fc_member`: ë©¤ë²„ì‹­ í˜„í™© ì •ë³´ (í˜„ì¬ ìƒíƒœ ì •ë³´ë§Œ í™•ì¸ ê°€ëŠ¥)
    * `membership.member_history`: ë©¤ë²„ì‹­ íˆìŠ¤í† ë¦¬ ì •ë³´ (ê³¼ê±° êµ¬ë§¤ ê±´ í™•ì¸)
    * `wev_prod.we_mart.ods_ws_order_sheet`: ì£¼ë¬¸ ì •ë³´
    * `wev_prod.we_mart.ods_ws_order_item`: ì£¼ë¬¸ ìƒí’ˆ ì •ë³´
    * `wev_prod.we_mart.ods_fc_member_confirm_purchase_history`: ë©¤ë²„ì‹­ êµ¬ë§¤ í™•ì • ì •ë³´
    * `wev_prod.we_mart.ods_fc_member_membership_history`: ë©¤ë²„ì‹­ ê°€ì…/ë§Œë£Œ íƒ€ì… ì •ë³´
    * `wev_prod.we_mart.ods_ws_user`: ìœ ì € ì •ë³´
    * `wev_prod.we_mart.ws_user_ctry_history`: ìœ ì € êµ­ê°€ ì •ë³´ íˆìŠ¤í† ë¦¬
    * `wev_prod.membership.membership`: ë©¤ë²„ì‹­ ìƒí’ˆ ì •ë³´
    * `wev_prod.membership.artist_shop_version`: ë©¤ë²„ì‹­ ìƒí’ˆ ë²„ì „ ì •ë³´
    * `wev_prod.membership.artist`: ì•„í‹°ìŠ¤íŠ¸ ì •ë³´
    * `wev_prod.membership.membership_version`: ë©¤ë²„ì‹­ ë²„ì „ ì •ë³´
    * `wev_prod.membership.membership_shop`: ë©¤ë²„ì‹­ ìƒí’ˆ íŒë§¤ ìƒµ ì •ë³´
    * `wev_prod.membership.membership_type`: ë©¤ë²„ì‹­ ìƒí’ˆ íƒ€ì… ì •ë³´
    * `wev_prod.we_mart.we_artist`: ì•„í‹°ìŠ¤íŠ¸ ì •ë³´
    * `wev_prod.we_meta.we_country`: êµ­ê°€ ì •ë³´
    * `wev_prod.membership.member_privacy_history`: ìœ ì € ê°œì¸ì •ë³´ íˆìŠ¤í† ë¦¬
2. **ë°ì´í„° ì „ì²˜ë¦¬**:
    * `ods_fc_member` í…Œì´ë¸”ê³¼ `member_history` í…Œì´ë¸”ì„ í•©ì³ ë©¤ë²„ì‹­ ê°€ì… íˆìŠ¤í† ë¦¬ ì •ë³´ ìƒì„±
    * SMEJ ì´ê´€ ìœ ì €ì˜ ê°€ì… ì‹œê° ì •ë³´ë¥¼ ì´ê´€ ì‹œì ìœ¼ë¡œ ìˆ˜ì •
    * ë©¤ë²„ì‹­ ë§Œë£Œ ì‹œê°ì„ `deactivated_at`, `ended_at`, `updated_at` ë“±ì„ ê³ ë ¤í•˜ì—¬ ì •í™•í•˜ê²Œ ê³„ì‚°
    * `member_history` í…Œì´ë¸”ì—ë§Œ ì¡´ì¬í•˜ëŠ” ë°ì´í„°ëŠ” `DEACTIVATED` ìƒíƒœë¡œ ì²˜ë¦¬
    * ë©¤ë²„ì‹­ ì²« êµ¬ë§¤ ì‹œê° ì •ë³´ ìƒì„±
    * ê° ë©¤ë²„ì‹­ ë²ˆí˜¸ì— ëŒ€í•œ ê°€ì¥ ìµœê·¼ ìƒíƒœë§Œ ì¶”ì¶œ
3. **ë°ì´í„° í†µí•©**:
    * ë©¤ë²„ì‹­ ê°€ì… íˆìŠ¤í† ë¦¬ ì •ë³´, ì£¼ë¬¸ ì •ë³´, ìœ ì € ì •ë³´, ë©¤ë²„ì‹­ ìƒí’ˆ ì •ë³´ ë“±ì„ `left join`ìœ¼ë¡œ ê²°í•©
    * ë©¤ë²„ì‹­ ë³µêµ¬ ì •ë³´ë¥¼ `left join`ìœ¼ë¡œ ì¶”ê°€
    * ë©¤ë²„ì‹­ êµ¬ë§¤ íƒ€ì…, íƒˆí‡´ ì‚¬ìœ  ë“±ì„ ê³„ì‚°í•˜ì—¬ ì¶”ê°€
    * ë©¤ë²„ì‹­ êµ¬ë§¤ íšŸìˆ˜, ê°±ì‹ ìœ¼ë¡œ ì¸í•œ ì¶”ê°€ ì¼ìˆ˜ ë“±ì„ ê³„ì‚°í•˜ì—¬ ì¶”ê°€
    * ìœ ì €ì˜ ìµœì´ˆ ê°€ì… ì‹œê°(ë©¤ë²„ì‹­ ì„œë¹„ìŠ¤ ì „ì²´ ê¸°ì¤€, ì•„í‹°ìŠ¤íŠ¸ ê¸°ì¤€, ìƒµ ê¸°ì¤€) ì •ë³´ë¥¼ ê³„ì‚°í•˜ì—¬ ì¶”ê°€
4. **ìµœì¢… í…Œì´ë¸” ìƒì„±**:
    * ìœ„ ë‹¨ê³„ì—ì„œ ìƒì„±ëœ ë°ì´í„°ë¥¼ `we_mart.ws_fc_user_history` í…Œì´ë¸”ì— ì €ì¥
    * `part_art_id`ì™€ `part_date`ë¥¼ íŒŒí‹°ì…˜ í‚¤ë¡œ ì‚¬ìš©

### í…Œì´ë¸” í™œìš© ê°€ì´ë“œ

* **ì£¼ìš” í™œìš©**:
    * ìœ„ë²„ìŠ¤ ë©¤ë²„ì‹­ ê°€ì… ë° êµ¬ë§¤ íŒ¨í„´ ë¶„ì„
    * ë©¤ë²„ì‹­ ë§Œë£Œ ì›ì¸ ë¶„ì„
    * ìœ ì €ì˜ ë©¤ë²„ì‹­ ì´ìš© í–‰íƒœ ë¶„ì„
    * ë©¤ë²„ì‹­ ìƒí’ˆë³„ êµ¬ë§¤ ì •ë³´ ë¶„ì„
    * ë©¤ë²„ì‹­ ë³µêµ¬ ê±´ ë¶„ì„
* **ì¡°ì¸ ì‹œ ìœ ì˜ì‚¬í•­**:
    * `we_member_id`ëŠ” ìœ„ë²„ìŠ¤ í”Œë«í¼ ì „ì²´ì˜ ìœ ì € IDë¡œ, `wv_user_id` (Weverse community) ë˜ëŠ” `ws_user_id` (Weverse Shop)ì™€ ì¼ì¹˜í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ
    * `fc_num`ì€ ë©¤ë²„ì‹­ íšŒì›ë²ˆí˜¸ë¡œ, ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ìœ ì € IDì™€ ì¼ì¹˜í•˜ì§€ ì•ŠìŒ
    * `part_date`ëŠ” íŒŒí‹°ì…˜ ì¼ìë¡œ, ë‹¤ë¥¸ í…Œì´ë¸”ì˜ `part_date`ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸

### ì¶”ê°€ ì •ë³´

* `we_member_id`ëŠ” ìœ„ë²„ìŠ¤ í”Œë«í¼ ì „ì²´ì˜ ìœ ì € IDë¡œ, ë‹¤ë¥¸ ì„œë¹„ìŠ¤(ì˜ˆ: Weverse community, Weverse Shop)ì˜ ìœ ì € IDì™€ ì¼ì¹˜í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ
* `fc_num`ì€ ë©¤ë²„ì‹­ íšŒì›ë²ˆí˜¸ë¡œ, ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ìœ ì € IDì™€ ì¼ì¹˜í•˜ì§€ ì•ŠìŒ
* `auth_ctry_code`ì™€ `auth_ctry_name`ì€ ìœ ì €ì˜ ì „í™”ë²ˆí˜¸ ì¸ì¦ êµ­ê°€ ì •ë³´ë¥¼ ë‚˜íƒ€ëƒ„
* `is_restore_item`ê³¼ `is_cx_by_restore`ëŠ” ë©¤ë²„ì‹­ ë³µêµ¬ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ„
* `first_create_dt`, `shop_first_create_dt`, `tot_first_create_dt`ëŠ” ìœ ì €ì˜ ìµœì´ˆ ê°€ì… ì‹œê° ì •ë³´ë¥¼ ë‚˜íƒ€ëƒ„
* `raw_expired_at`ëŠ” ê²€ì¦ìš© ë§Œë£Œì¼ìë¡œ, `expired_at`ì™€ ë¹„êµí•˜ì—¬ ì •í™•ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ  
---
# COLUMN INFO

|#|Column Name|Data Type|Comment|
| :--- | :--- | :--- | :--- |
|0|we_member_id|bigint|we_member_id|
|1|user_id|bigint|ìœ„ë²„ìŠ¤ìƒµ íšŒì› id|
|2|user_status|string|ìœ„ë²„ìŠ¤ìƒµ ê³„ì • ìƒíƒœ|
|3|birth_date|string|ìƒë…„ì›”ì¼|
|4|sex|string|ì„±ë³„|
|5|first_ip_ctry|string|ìµœì´ˆ ì ‘ì† êµ­ê°€|
|6|we_art_id|int|we_art_id|
|7|we_art_name|string|we_art_name|
|8|comm_id|bigint|ìœ„ë²„ìŠ¤ ì»¤ë®¤ë‹ˆí‹° id|
|9|ws_art_id|bigint|ìœ„ë²„ìŠ¤ìƒµ ì•„í‹°ìŠ¤íŠ¸ id|
|10|ws_label_id|bigint|ìœ„ë²„ìŠ¤ìƒµ ë ˆì´ë¸” id|
|11|shop|string|ë©¤ë²„ì‹­ êµ¬ë§¤ SHOP|
|12|fc_id|bigint|ë©¤ë²„ì‹­ id|
|13|fc_name|string|ë©¤ë²„ì‹­ëª…|
|14|fc_ver|int|ë©¤ë²„ì‹­ ë²„ì „|
|15|fc_type|string|ë©¤ë²„ì‹­ ì¢…ë¥˜|
|16|fc_num|string|ë©¤ë²„ì‹­ íšŒì›ë²ˆí˜¸|
|17|create_dt|timestamp|ë©¤ë²„ì‹­ êµ¬ë§¤ ì‹œê°„|
|18|no_refund_dt|timestamp|ë©¤ë²„ì‹­ êµ¬ë§¤í™•ì • ì‹œê°„|
|19|expire_dt|timestamp|ë©¤ë²„ì‹­ ë§Œë£Œ ì‹œê°„|
|20|start_dt|timestamp|ë©¤ë²„ì‹­ ìœ íš¨ê¸°ê°„ ì‹œì‘ ì‹œê°„|
|21|end_dt|timestamp|ë©¤ë²„ì‹­ ìœ íš¨ê¸°ê°„ ë§Œë£Œì˜ˆì • ì‹œê°„|
|22|ord_ip_ctry|string|ë©¤ë²„ì‹­ êµ¬ë§¤ì‹œì  ip ê¸°ì¤€ êµ­ê°€|
|23|auth_call_code|int|ì „í™”ë²ˆí˜¸ ì¸ì¦ë²ˆí˜¸|
|24|auth_ctry_code|array<string>|ì „í™”ë²ˆí˜¸ ì¸ì¦ êµ­ê°€ì½”ë“œ|
|25|auth_ctry_name|array<string>|ì „í™”ë²ˆí˜¸ ì¸ì¦ êµ­ê°€ëª…|
|26|sale_id|bigint|sale_id|
|27|ord_sheet_id|bigint|order_sheet_id|
|28|ord_sheet_num|bigint|order_sheet_number ì£¼ë¬¸ë²ˆí˜¸|
|29|pur_type|string|ë©¤ë²„ì‹­ êµ¬ë§¤ ì¢…ë¥˜|
|30|fc_status|string|ë©¤ë²„ì‹­ ê°€ì…ìƒíƒœ|
|31|ord_status|string|ë©¤ë²„ì‹­ êµ¬ë§¤ìƒíƒœ|
|32|withdraw_status|string|ë©¤ë²„ì‹­ ë§Œë£Œ ìƒì„¸ ë‚´ìš©|
|33|pur_seq|int|ë©¤ë²„ì‹­ êµ¬ë§¤ íšŸìˆ˜|
|34|extra_day|int|ê°±ì‹  í˜œíƒìœ¼ë¡œ ë°›ì€ ì¶”ê°€ ì¼ì|
|35|is_restore_item|int|ë³µêµ¬ëœ ë©¤ë²„ì‹­ ìœ ë¬´|
|36|is_cx_by_restore|int|ë©¤ë²„ì‹­ ë³µêµ¬ë¡œ ì¸í•œ ì·¨ì†Œ ìœ ë¬´|
|37|restore_dt|timestamp|ìš´ì˜ìœ¼ë¡œ ì¸í•´ ê³¼ê±° ë©¤ë²„ì‹­ìœ¼ë¡œ ë³µêµ¬í•œ ì‹œê°„|
|38|first_create_dt|timestamp|ì•„í‹°ìŠ¤íŠ¸ ë©¤ë²„ì‹­ ì²«ê°€ì…ì¼ì|
|39|shop_first_create_dt|timestamp|ìƒµê¸°ì¤€ ë©¤ë²„ì‹­ ì²«ê°€ì…ì¼ì|
|40|tot_first_create_dt|timestamp|ìœ„ë²„ìŠ¤ìƒµ ë©¤ë²„ì‹­ ì²«ê°€ì…ì¼ì|
|41|raw_expired_at|timestamp|ê²€ì¦ìš© ë§Œë£Œì¼ì(from order_item)|
|42|run_timestamp|timestamp|ì ì¬ ì‹œê°„|
|43|part_date|string|íŒŒí‹°ì…˜ ì¼ì|
|44|part_art_id|bigint|íŒŒí‹°ì…˜ ì•„í‹°ìŠ¤íŠ¸ id|
  
    
---
# HOW TO USE
  
No content.  
---
# PIPELINE INFO

## âŒ›ï¸ BATCH

### DAG: `analytics_ws_mart_daily`

### Update Interval: DAILY

### Update Type: APPEND

## ğŸ“ LINK URLs

### Github: [Source Code](https://github.com/benxcorp/databricks/blob/main/src/data_analytics/mart/we_mart/ws_fc_user_history.py)

### Airflow: [DAG](https://github.com/benxcorp/dp-airflow/blob/main/dags/utils/dynamic_dag/wev/task_list/analytics_ws_mart_daily.py)
  
    
---
# DEPENDENCIES

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Up/Downstream Table List

|Upstream Tables|Downstream Tables|
| :--- | :--- |
|membership.artist|we_mart.ph_subscr|
|membership.artist_shop_version|we_mart.stats_ws_d_fc_join|
|membership.member_history|we_mart.stats_ws_d_fc_kit_pur|
|membership.member_privacy_history|we_mart.stats_ws_d_fc_shop_cross_join|
|membership.membership|we_mart.stats_ws_m_fc_jp_sm|
|membership.membership_shop|we_mart.stats_wv_d_posting_activity|
|membership.membership_type|we_mart.tmp_val_fc_kit_pur|
|membership.membership_version|we_mart.view_ws_ship_status_fc_kit|
|test.fc_val2|we_mart.wa_sess_daily|
|we_mart.ods_fc_member|we_mart.wa_user_album_reg|
|we_mart.ods_fc_member_confirm_purchase_history|we_mart.we_fan_apply|
|we_mart.ods_fc_member_membership_history|we_mart.we_order|
|we_mart.ods_ws_order_item|we_mart.we_user_demo_log|
|we_mart.ods_ws_order_sheet|we_mart.we_user_dic_engaged_by_project|
|we_mart.ods_ws_user|we_mart.ws_fc_user_by_ord|
|we_mart.we_artist|we_mart.ws_fc_user_history|
|we_mart.ws_fc_user_history|we_mart.ws_fc_user_update|
|we_mart.ws_user_ctry_history|we_mart.ws_order|
|we_meta.we_country|we_mart.ws_sess_daily|
| |we_mart.ws_user_buy|
| |we_mart.ws_user_daily|
| |we_mart.wv_comm_user|
| |we_mart.wv_dm_msg_fan|
| |we_mart.wv_dm_subscr_daily|
| |we_mart.wv_dm_subscr_history|
| |we_mart.wv_fanletter_consume|
| |we_mart.wv_fanletter_voucher|
| |we_mart.wv_live_play|
| |we_mart.wv_media_reaction|
| |we_mart.wv_order|
| |we_mart.wv_post_reaction|
| |we_mart.wv_sess_daily|

## ğŸ¤ Downstream Tables Info
  
### Downstream Tables
- **`we_mart.ws_fc_user_update`**: FCë©¤ë²„ì‹­ ì „ì²´ íšŒì› ì •ë³´ snapshot. `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ ìµœì‹  ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ `fc_num` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ì§„í–‰. ë§Œë£Œëœ íšŒì›ì€ ì‚­ì œ ì²˜ë¦¬.
    - `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `part_date` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ìµœì‹  ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ `fc_num` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ `ws_fc_user_update` í…Œì´ë¸”ê³¼ join ì§„í–‰.
    - `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `fc_num` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ìµœì‹  ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ `ws_fc_user_update` í…Œì´ë¸”ì— merge into. ë§Œë£Œëœ íšŒì›ì€ ì‚­ì œ ì²˜ë¦¬.
- **`wev_prod.we_mart.ws_fc_user_by_ord`**: ì£¼ë¬¸ë²ˆí˜¸ë³„ ë©¤ë²„ì‹­ ìœ íš¨ê¸°ê°„. `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ ì£¼ë¬¸ë²ˆí˜¸ì™€ ë©¤ë²„ì‹­ ë²ˆí˜¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ `ws_fc_user_by_ord` í…Œì´ë¸”ì— ì €ì¥.
    - `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `ord_sheet_num` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ `ws_fc_user_by_ord` í…Œì´ë¸”ì— merge into. ë§Œë£Œëœ íšŒì›ì€ ì‚­ì œ ì²˜ë¦¬.
    - `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `ord_sheet_num` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ `ws_fc_user_by_ord` í…Œì´ë¸”ì— ì €ì¥.

### Downstream View Tables
- **`wev_prod.we_mart.view_ws_ship_status_fc_kit`**: weverseshop ë©¤ë²„ì‹­ í‚¤íŠ¸ ë°°ì†¡ ìƒíƒœ. `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ ë©¤ë²„ì‹­ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ `weverseshop` í…Œì´ë¸”ì˜ í‚¤íŠ¸ ì£¼ë¬¸ ì •ë³´ì™€ join.
    - `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `fc_id` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë©¤ë²„ì‹­ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ `weverseshop.order_item` í…Œì´ë¸”ê³¼ join. `weverseshop.order_item` í…Œì´ë¸”ì˜ `goods_code` ì»¬ëŸ¼ê³¼ `ws_fc_user_history` í…Œì´ë¸”ì˜ `fc_id` ì»¬ëŸ¼ì„ ë¹„êµí•˜ì—¬ í‚¤íŠ¸ ì£¼ë¬¸ ì •ë³´ë¥¼ ì¶”ì¶œ.
    - `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `fc_id` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë©¤ë²„ì‹­ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ `weverseshop.order_item` í…Œì´ë¸”ê³¼ join. `weverseshop.order_item` í…Œì´ë¸”ì˜ `goods_code` ì»¬ëŸ¼ê³¼ `ws_fc_user_history` í…Œì´ë¸”ì˜ `fc_id` ì»¬ëŸ¼ì„ ë¹„êµí•˜ì—¬ í‚¤íŠ¸ ì£¼ë¬¸ ì •ë³´ë¥¼ ì¶”ì¶œ.
- **`wev_prod.we_mart.stats_ws_d_fc_shop_cross_join`**: ì¼ë³„ ë©¤ë²„ì‹­ ìƒµ ì¤‘ë³µê°€ì…ì í†µê³„. `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `we_member_id`, `fc_id`, `shop` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì¤‘ë³µ ê°€ì… ì—¬ë¶€ë¥¼ íŒë‹¨.
    - `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `we_member_id` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ `shop` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ë³µ ê°€ì… ì—¬ë¶€ë¥¼ íŒë‹¨.
    - `ws_fc_user_history` í…Œì´ë¸”ì—ì„œ `we_member_id` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ `shop` ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ë³µ ê°€ì… ì—¬ë¶€ë¥¼ íŒë‹¨.  
---